{% extends "base.html" %}

{% block title %}Edit Goal - SkillTracker{% endblock %}

{% block content %}
<div class="form-page">
    <div class="form-container">
        <div class="form-header">
            <a href="{{ url_for('dashboard') }}" class="back-link">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
            <h1><i class="fas fa-edit"></i> Edit Learning Goal</h1>
            <p>Update your goal details to keep them relevant</p>
        </div>

        <form method="POST" action="{{ url_for('edit_goal', goal_id=goal.id) }}" class="goal-form">
            <div class="form-group">
                <label for="goal_name">
                    <i class="fas fa-flag"></i> Goal Name *
                </label>
                <input 
                    type="text" 
                    id="goal_name" 
                    name="goal_name" 
                    class="form-control" 
                    value="{{ goal.goal_name }}"
                    required
                    maxlength="100"
                >
                <small class="form-hint">Be specific about what you want to learn</small>
            </div>

            <div class="form-group">
                <label for="target_date">
                    <i class="fas fa-calendar-alt"></i> Target Date (Optional)
                </label>
                <input 
                    type="date" 
                    id="target_date" 
                    name="target_date" 
                    class="form-control"
                    value="{{ goal.target_date or '' }}"
                    min="{{ today }}"
                >
                <small class="form-hint">Adjust your deadline if needed</small>
            </div>

            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                <div>
                    <strong>Note:</strong> Editing this goal won't affect your existing log entries. 
                    All your progress will be preserved.
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Changes
                </button>
                <a href="{{ url_for('dashboard') }}" class="btn btn-outline">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>
    </div>

    <div class="form-sidebar">
        <div class="sidebar-card">
            <i class="fas fa-history sidebar-icon"></i>
            <h3>Goal History</h3>
            <p>This goal was created on:</p>
            <p class="highlight-text">{{ goal.created_at }}</p>
        </div>

        <div class="sidebar-card danger">
            <i class="fas fa-exclamation-triangle sidebar-icon"></i>
            <h3>Delete Goal</h3>
            <p>Want to remove this goal permanently? This action cannot be undone.</p>
            <a href="{{ url_for('delete_goal', goal_id=goal.id) }}" 
               class="btn btn-danger btn-block"
               onclick="return confirm('Are you sure? This will delete all logs associated with this goal.')">
                <i class="fas fa-trash"></i> Delete Goal
            </a>
        </div>
    </div>
</div>

<script>
// Set today's date as minimum
document.getElementById('target_date').min = new Date().toISOString().split('T')[0];
</script>
{% endblock %}